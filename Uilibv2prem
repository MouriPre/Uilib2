local Fatality = loadstring(game:HttpGet("https://raw.githubusercontent.com/MouriPre/Uilib2/refs/heads/main/Uilibv2prem"))();
local Notification = Fatality:CreateNotifier();

Fatality:Loader({
	Name = "Project Kryo",
	Duration = 2
});

Notification:Notify({
	Title = "Project Kryo",
	Content = "Hello!, "..game.Players.LocalPlayer.DisplayName..' Thanks for using my script!',
	Icon = "clipboard"
})

local Window = Fatality.new({
	Name = "Project Kryo",
	Expire = "Forever",
	Scale = UDim2.new(0, 720, 0, 480),
	Position = UDim2.new(0.55, 0, 0.1),
	BackgroundTransparency = 0.1
});

local Rage = Window:AddMenu({
	Name = "Esp",
	Icon = "eye"
})

do
local EspP = Rage:AddSection({
		Position = 'left',
		Name = "Player"
});
--===========================Box2DP================================--
	local EspPlayer = EspP:AddToggle({
	Name = "Box",
	Risky = false,
	Option = false
})
end
--==========================EndBox2DP==============================--
local EspP = Rage:AddSection({
		Position = 'center',
		Name = "Slider"
});

local EspP = Rage:AddSection({
		Position = 'center',
		Name = "Dropdown"
});

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Tạo ScreenGui
local ScreenGui = Instance.new("ScreenGui", playerGui)
ScreenGui.Name = "ToggleButtonGui"
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false

-- Tạo ImageButton
local ImageButton = Instance.new("ImageButton", ScreenGui)
ImageButton.Name = "ToggleButton"
ImageButton.BorderSizePixel = 0
ImageButton.BackgroundTransparency = 1
ImageButton.Image = "rbxassetid://91058882745799"
ImageButton.Size = UDim2.new(0, 42, 0, 42)
ImageButton.Position = UDim2.new(0, 0, 0, 10)
ImageButton.ImageTransparency = 0

local UICorner = Instance.new("UICorner", ImageButton)
UICorner.CornerRadius = UDim.new(0, 4)

-- ============ DRAG-DROP LOGIC ============
local dragging = false
local dragStart
local startPos
local smoothness = 0.25

local function smoothMove(newPos)
	local tween = TweenService:Create(
		ImageButton,
		TweenInfo.new(smoothness, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
		{Position = newPos}
	)
	tween:Play()
end

ImageButton.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 
	or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = ImageButton.Position
	end
end)

ImageButton.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 
	or input.UserInputType == Enum.UserInputType.Touch then
		dragging = false
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement 
	or input.UserInputType == Enum.UserInputType.Touch) then
		
		local delta = input.Position - dragStart
		local newPos = UDim2.new(
			startPos.X.Scale,
			startPos.X.Offset + delta.X,
			startPos.Y.Scale,
			startPos.Y.Offset + delta.Y
		)
		smoothMove(newPos)
	end
end)

-- ============ HOVER EFFECT ============
ImageButton.MouseEnter:Connect(function()
	local tween = TweenService:Create(
		ImageButton,
		TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
		{ImageTransparency = 0}
	)
	tween:Play()
end)

ImageButton.MouseLeave:Connect(function()
	if not dragging then
		local tween = TweenService:Create(
			ImageButton,
			TweenInfo.new(0.7, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
			{ImageTransparency = 0}
		)
		tween:Play()
	end
end)

-- ============ CLICK EVENT ============
ImageButton.MouseButton1Click:Connect(function()
	if Window then
		Window:SetVisible(not Window.Toggle)
	end
end)
